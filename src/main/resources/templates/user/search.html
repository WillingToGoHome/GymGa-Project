<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" th:href="@{/css/selectAll.css}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap">
</head>
<body>
<div class="on">
    <img src="/img/Back.png">
    <div class="top">회원 리스트</div>
    <form action="/user/search" method="post">
        <input type="text" class="search" name="search" placeholder="검색 내용">
        <select name="category" class="option">
            <option value="basic">카테고리</option>
            <option value="name">이름</option>
            <option value="id">아이디</option>
        </select>
        <button type="submit" class="searchButton">검색</button>
    </form>
</div>
<hr class="hr1">
<div class="title">
    <p class="titleText">이름</p>
    <p class="titleText">아이디</p>
    <p class="titleText">성별</p>
    <p class="titleText">전화번호</p>
    <p class="titleText">담당강사</p>
    <p class="titleText">관리</p>
</div>
<hr class="hr2">
<div class="userList" th:each="user : ${ userList }">
    <p class="userName" th:text="${ user.name }"></p>
    <p class="userId" th:text="${ user.id }"></p>
    <p th:if="${ user.gender == '남'}" class="userGender" th:text="${ user.gender }"></p>
    <p th:if="${ user.gender == '여'}" class="userGender2" th:text="${ user.gender }"></p>
    <p class="userPhone" th:text="${ user.phone }"></p>
    <p class="userStaff" th:text="${ user.staff }"></p>
    <div class="buttonBox">
        <button class="detailButton">상세</button>
        <button class="deleteButton">삭제</button>
        <div class="modalContainer">
            <div class="modalContent">
                <div class="textBox">
                    <p class="modalText1"><span th:text="${ user.name }"></span>님이 선택되었습니다</p>
                    <p class="modalText2">정말 삭제하시겠습니까?</p>
                </div>
                <div class="modalButtonBox">
                    <button class="cancelButton">취소</button>
                    <form action="/user/delete" method="post">
                        <input type="hidden" name="code" th:value="${user.code}">
                        <input class="checkButton" type="submit" value="확인">
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="qwe">
    <button type="button" class="registButton" onclick="location.href='/user/regist'">등록</button>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        var userListSize = $(".userList").length;
        for (var i = 0; i < userListSize -1; i++) {
            var userList = $(".userList:eq(" + i + ")");
            userList.after("<div>");
            var hrDiv = userList.next();
            hrDiv.append("<div th:each='user : ${userList}'><hr class='hr3'></div>");
        }
    });

    $(".deleteButton").click(function() {
        $(this).siblings(".modalContainer").show();
    });

    $(".cancelButton").click(function() {
        $(this).closest(".modalContainer").hide();
    });
</script>
</body>
</html>